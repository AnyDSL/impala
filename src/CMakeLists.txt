if(MSVC)
    add_definitions(-D_SCL_SECURE_NO_WARNINGS)
    add_definitions(-D_CRT_SECURE_NO_WARNINGS)
    add_compile_options("/wd4800" "/wd4520")
else()
    add_definitions("-Wall -Wextra")
endif()

find_package(Thorin REQUIRED)
include_directories(${Thorin_INCLUDE_DIRS})

if(Thorin_HAS_LLVM_SUPPORT)
    add_definitions(${LLVM_DEFINITIONS})
    add_definitions("-DLLVM_SUPPORT")
    include_directories(SYSTEM ${LLVM_INCLUDE_DIRS})
endif()

include_directories(${CMAKE_CURRENT_SOURCE_DIR})
add_subdirectory(impala)
if(Thorin_HAS_LLVM_SUPPORT)
    add_subdirectory(intrinsicgen)
endif()
